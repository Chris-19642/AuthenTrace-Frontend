<div class="container">
  <a (click)="volverInicio()" class="back-button">
    <span class="back-arrow">â†</span>
    <span>Volver al inicio</span>
  </a>

  <div class="steps">
    <div class="step completed">âœ“</div>
    <div class="step-line"></div>
    <div class="step active">2</div>
  </div>

  <form (ngSubmit)="cambiarContrasenha()">
    <h1>Crear nueva contraseÃ±a</h1>
    <p class="subtitle">
      IngresÃ¡ el cÃ³digo que te enviamos a <strong>{{ email }}</strong> y creÃ¡ tu nueva contraseÃ±a
    </p>


    <div class="codigo-container">
      @for (item of codigo; track $index; let i = $index) {
        <input
          type="text"
          [id]="'codigo-' + i"
          class="codigo-input"
          maxlength="1"
          [(ngModel)]="codigo[i]"
          [name]="'codigo-' + i"
          (input)="onCodigoInput(i, $event)"
          (keydown)="onCodigoKeydown(i, $event)"
          pattern="[0-9]"
          required
        >
      }
    </div>


    <div class="form-group">
      <label for="password">ContraseÃ±a</label>
      <div class="password-container">
        <input
          [type]="mostrarPassword ? 'text' : 'password'"
          id="password"
          name="password"
          [(ngModel)]="password"
          (ngModelChange)="onPasswordChange()"
          placeholder="Ingresa tu nueva contraseÃ±a"
          required
        >
        <button
          type="button"
          class="toggle-password"
          (click)="toggleMostrarPassword()"
        >
          {{ mostrarPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
        </button>
      </div>
    </div>


    <div class="validaciones">
      <p class="validacion-title">Tu contraseÃ±a debe tener:</p>
      <ul class="validacion-lista">
        <li [class.valido]="tieneMayuscula && tieneMinuscula">
          Atmenos una minÃºscula y una mayÃºscula
        </li>
        <li [class.valido]="tieneMinimo8">
          MÃ­nimo 8 caracteres
        </li>
        <li [class.valido]="tieneNumero">
          Al menos un nÃºmero
        </li>
      </ul>
    </div>

    <button
      type="submit"
      class="submit-button"
      [disabled]="!tieneMayuscula || !tieneMinuscula || !tieneMinimo8 || !tieneNumero"
    >
      Cambiar contraseÃ±a
    </button>
  </form>
</div>
