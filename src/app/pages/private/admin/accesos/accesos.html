<div class="container">
  <div class="card">
    <h1 class="title">Reporte de accesos</h1>
    <div class="search-container">
      <input
        type="text"
        class="search-input"
        placeholder="Buscar por nombre, rol o estado..."
        #searchInput
        (input)="buscar(searchInput.value)"
      >
      <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
    </div>

    <table class="table">
      <thead>
      <tr>
        <th class="sortable">
          Nombre
          <span class="sort-icons">↑↓</span>
        </th>
        <th>Rol</th>
        <th class="sortable">
          Estado
          <span class="sort-icons">↑↓</span>
        </th>
        <th>Acción</th>
      </tr>
      </thead>
      <tbody>
        @for (usuario of usuariosFiltrados; track usuario.nombre) {
          <tr>
            <td>{{ usuario.nombre }}</td>
            <td>{{ usuario.rol }}</td>
            <td>
              <span [class]="'badge badge-' + (usuario.estado === 'Activo' ? 'activo' : 'bloqueado')">
                {{ usuario.estado }}
              </span>
            </td>
            <td>
              <div class="action-buttons">
                <button class="btn btn-editar" (click)="editar(usuario)">Editar</button>
                <button class="btn btn-bloquear" (click)="bloquear(usuario)">Bloquear</button>
                <button class="btn btn-eliminar" (click)="eliminar(usuario)">Eliminar</button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>

    <button class="btn-historial" (click)="verHistorial()">
      Historial de accesos
    </button>
  </div>
</div>
