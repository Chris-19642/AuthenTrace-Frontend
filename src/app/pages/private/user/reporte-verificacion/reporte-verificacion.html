<div class="reporte-container">
  <!-- Header -->
  <h1 class="page-title">Reporte de Verificación</h1>

  <!-- Mensaje de carga -->
  <div *ngIf="cargando" class="loading-message">
    <p>Cargando reporte...</p>
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="error && !cargando" class="error-message">
    <p>{{ error }}</p>
  </div>

  <!-- Contenido del reporte -->
  <div *ngIf="!cargando && !error" class="reporte-card">

    <!-- Nombre del documento -->
    <h2 class="documento-nombre">{{ reporte.nombreDocumento }}</h2>

    <!-- Contenido principal -->
    <div class="reporte-content">

      <!-- Imagen/Ilustración -->
      <div class="imagen-container">
        <div class="documento-ilustracion">
          <!-- SVG inline de documentos apilados -->
          <svg width="180" height="140" viewBox="0 0 180 140" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Documento trasero -->
            <rect x="60" y="30" width="100" height="100" rx="4" fill="white" opacity="0.7"/>
            <line x1="75" y1="50" x2="140" y2="50" stroke="#666" stroke-width="2"/>
            <line x1="75" y1="65" x2="140" y2="65" stroke="#666" stroke-width="2"/>
            <line x1="75" y1="80" x2="120" y2="80" stroke="#666" stroke-width="2"/>

            <!-- Documento delantero -->
            <rect x="30" y="20" width="100" height="100" rx="4" fill="white"/>
            <line x1="45" y1="40" x2="110" y2="40" stroke="#333" stroke-width="2"/>
            <line x1="45" y1="55" x2="110" y2="55" stroke="#333" stroke-width="2"/>
            <line x1="45" y1="70" x2="90" y2="70" stroke="#333" stroke-width="2"/>
            <line x1="45" y1="85" x2="110" y2="85" stroke="#333" stroke-width="2"/>
          </svg>
        </div>
      </div>

      <!-- Información de verificación -->
      <div class="info-container">

        <!-- Estado de la firma -->
        <div class="estado-firma">
          <span class="check-symbol" [class.valido]="reporte.firmaAutentica" [class.invalido]="!reporte.firmaAutentica">
            {{ reporte.firmaAutentica ? '✓' : '✗' }}
          </span>
          <span class="estado-texto" [class.valido]="reporte.firmaAutentica" [class.invalido]="!reporte.firmaAutentica">
            {{ estadoTexto }}
          </span>
        </div>

        <!-- Nivel de confianza -->
        <p class="confianza-texto">Confianza del {{ reporte.confianza }}%</p>

        <!-- Detalles adicionales -->
        <p *ngIf="reporte.detalles" class="detalles-texto">{{ reporte.detalles }}</p>

        <!-- Discrepancias (si existen) -->
        <div *ngIf="reporte.discrepancias && reporte.discrepancias.length > 0" class="discrepancias-box">
          <h3 class="discrepancias-titulo">Discrepancias detectadas:</h3>
          <ul class="discrepancias-lista">
            <li *ngFor="let discrepancia of reporte.discrepancias">
              {{ discrepancia }}
            </li>
          </ul>
        </div>

        <!-- Botón de descarga -->
        <button
          class="descargar-button"
          (click)="descargarPDF()">
          Descargar como PDF
        </button>

      </div>

    </div>

  </div>
</div>
